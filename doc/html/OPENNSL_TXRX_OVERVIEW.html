<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenNSL API Guide and Reference Manual: Packet Transmit and Receive</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li class="current"><a href="pages.html"><span>OpenNSL&nbsp;Documentation</span></a></li>
      <li><a href="modules.html"><span>API&nbsp;Reference</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="OPENNSL_API_OVERVIEW.html">API Overview</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="OPENNSL_TXRX_OVERVIEW">Packet Transmit and Receive </a></h1><p>The OpenNSL packet transmit and receive APIs provide the ability to receive packets captured from the data plane and to send packets to the data plane from the Host CPU. Typical uses for these functions are to implement various networking control protocols or "slow path" session handling.</p>
<p>"Transmit" and "receive" are named from the point of view of the Host CPU, so a "tx" routine sends a packet from the Host CPU to egress some switch port, while "rx" routines handle packets extracted from the data plane. Selection of the frames that get captured to the Host CPU is handled by other modules such as the field processor.</p>
<p>The OpenNSL API presents packets in a standard format. The API defines a structure, opennsl_pkt_t, which includes both the actual packet data as well as additional metadata available to the switch device that is not part of the actual frame, such as the ingress port or destination. Packet data is pointed to by a member of the opennsl_pkt_t structure, and metadata is presented in other fields of that structure.</p>
<p>The Host CPU can transmit a single frame to one or more ports with a single call. The packet structure thus specifies the destination port(s) with a port bitmap.</p>
<p>The packet structure is divided into two parts:</p>
<ul>
<li>The actual packet data and a description of the frame format </li>
<li>Additional information about the packet not part of the actual packet (such as the port on which the packet was received).</li>
</ul>
<p>This second category is referred to as "metadata". The metadata oocupies many more members in the structure. Some of those members are specific to transmit or receive. The packet data proper is represented by a variable length array of (pointer, length) pairs called "blocks".</p>
<p>The opennsl_pkt_t contains a pointer to an array of these blocks, and a length of this array, "blk_count". Usually, one packet will require only one block, though this depends on the application's buffer management policy.</p>
<p>All other members of the opennsl_pkt_t structure are metadata. In the receive direction, metadata in the packet structure is parsed from the device-specific format supplied by the hardware. Some devices support a rich set of metadata, and this parsing can be a significant portion of the cost of handling a packet. So, applications which do not require the full metadata may opt to disable the driver parser and instead supply their own custom parser to extract only fields of interest. In the transmit direction, application code fills in any necessary fields in the opennsl_pkt_t structure. The underlying driver routines will use these fields to correctly format the entire frame as required by the specific switch device. </p>
</div>
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->


<!--BEGIN GENERATE_TREEVIEW -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->

<hr>
<p>	
<table class="footer-brcm">
	<tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align=left></td>
		<td class="footer-brcm"><small><b>&copy;  2016 by Broadcom Corporation. All rights reserved.</b></small>
			<div class="footer-brcm"><small>Broadcom Corporation reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design. 
Information furnished by Broadcom Corporation is believed to be accurate and reliable. However, Broadcom Corporation does not assume any liability arising 
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license 
under its patent rights nor the rights of others. </small>
			</div>
		</td>
	</tr>
</table>	
</p>	
	

</div>

<!--END GENERATE_TREEVIEW-->



<!--BEGIN !GENERATE_TREEVIEW-->
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
